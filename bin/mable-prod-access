#!/bin/bash

# This script acquires permissions for temporary access to Mable's production environment via terminal
#
# To install, run:
#
# ```
# git clone https://github.com/ZimbiX/dotfiles ~/projects/ZimbiX-dotfiles
# mkdir -p ~/.bin
# for script in mable-prod-access gh-workflow-run ci-run; do ln -sf ~/projects/ZimbiX-dotfiles/bin/$script ~/.bin; done
# echo 'export PATH=$HOME/.bin:$PATH' >> ~/.zshrc && . ~/.zshrc
# ```
#
# To use, ensure:
#
# - github-cli (gh) is installed and authenticated
# - jq is installed
# - ruby is installed
# - MABLE_EMAIL and GITHUB_USERNAME are set in your ~/.zshrc

set -Eeuo pipefail

green='\e[32m'; reset='\e[0m'

gh-workflow-run -R bettercaring/better_caring assignProdPermission.yaml -f userMail="$MABLE_EMAIL" --watch

printf "${green}Now run: switch-env prd-lw${reset}\n"
